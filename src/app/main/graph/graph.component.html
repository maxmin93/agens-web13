<div id="top" class="content col">

    <!-- /////////////////////////////  
        query card 
    ///////////////////////////// -->

    <div id="queryCard" [ngClass]="{'flex-1':isExpanded}" class="card col flex-1">
        <div class="card-header row row-m row-space">
            <h4 class="row row-m"><mat-icon class="mr10">code</mat-icon><span class="row row-b"> QUERY <strong>EDITOR </strong> <small> (CYPHER OR ANSI-SQL)</small></span></h4>
            <div class="btn-group">
                <a class="btn btn-link" [ngClass]="{ 'disabled-btn': isLoading }" (click)="runQuery()">RUN</a>
                <a class="btn btn-link" [ngClass]="{ 'disabled-btn': !isLoading }" (click)="stopQuery()">STOP</a>
                <a class="btn btn-link" [ngClass]="{ 'disabled-btn': isLoading }" (click)="clearProject()">NEW</a>
                <a class="btn btn-link" [ngClass]="{ 'disabled-btn': isLoading }" (click)="uploader.click()">IMPORT</a>
                <a class="btn btn-link" [ngClass]="{ 'disabled-btn': isLoading }" (click)="openProjectOpenDialog()">LOAD</a>
                <a class="btn btn-link" [ngClass]="{ 'disabled-btn': isLoading }" (click)="openProjectSaveDialog()">SAVE</a>
                <input hidden type="file" #uploader (change)="uploadFile($event)" />
            </div>
        </div>
        <div class="card-content">
            <!-- REQUEST : cypher query -->
            <form class="col border" [ngClass]="{'flex-1':isExpanded}">
                <textarea
                id="agensQuery" #queryEditor type="text" name="query"
                (change)="query=agensQuery.value" onkeydown="resize(this)" onkeyup="resize(this)"></textarea>
            </form>
        </div>
    </div>
    
    <!-- RESULT : progress-bar & message -->
    <app-query-result #queryResult class="col" [ngClass]="{'flex-1':isExpanded}"></app-query-result>


    <!-- /////////////////////////////  
        expand toggle btn 
    ///////////////////////////// -->

    <div class="row row-c">
        <a class="btn btn-link" (click)="toggleExpandEditor()"
            [matTooltip]="isExpanded ? 'compress':'expand'" matTooltipPosition="above"
            >
            <!-- [style.background-color]="isExpanded ? '#afafaf' : '#303F9F'" -->
            <mat-icon *ngIf="!isExpanded">expand_more</mat-icon>
            <mat-icon [style.color]="'red'" *ngIf="isExpanded">expand_less</mat-icon>
        </a>
    </div>

    <!-- /////////////////////////////  
        tab card 
    ///////////////////////////// -->

    <div id="tabComponent" class="col card card-space-no" [style.flex]="isExpanded ? 0 : 1"> 
        <mat-tab-group #resultTapGroup [selectedIndex]="currentTabIndex" class="mat-tab-vertical md-no-animation" disableRipple
            (selectedTabChange)="tabChanged($event)" (animationDone)="tabAnimationDone()">
            <mat-tab label="Graph">
                <!-- GRAPH(0) -->
                <app-query-graph #queryGraph (initDone)="initCallbackData($event)"></app-query-graph>
            </mat-tab>
            <mat-tab label="Table" [disabled]="false"> 
                <!-- TABLE(1) -->
                <app-query-table #queryTable></app-query-table>
            </mat-tab>
            <mat-tab label="Stats" [disabled]="false">
                <!-- STATIC(2) -->
                <app-stat-graph #statGraph (initDone)="initCallbackStat($event)"></app-stat-graph>
            </mat-tab>
        </mat-tab-group>
    </div>
</div>
