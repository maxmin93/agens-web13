  <!-- GRAPH -->
  <div id="graphCard" class="col strech">
    <div id="progressBarQueryGraph" #progressBar style='visibility:hidden;'>
        <mat-progress-bar color="accent" mode="indeterminate">Loading...</mat-progress-bar>
    </div>
    <!-- Graph content -->
    <div class="row strech">
        <div class="strech card p-no">
            <div id="graph-canvas" class="graph-canvas strech" #divCanvas 
                [style.height.px]="graphDivStyleHeightValue" [style.height.px]="graphDivStyleWidthValue"></div>
            <!-- graph element info Box -->
            <nav>
                <!-- 입력상자 : 라벨검색 -->
                <ng-container *ngIf="btnStatus.showHideTitle">
                    <div id="slide-toggle" class="slide side-short-component">
                        <div class="col">
                            <h4>find <strong>Title</strong></h4>
                            <span class="search m-20">
                                <input
                                class="border search"
                                type='text'            
                                placeholder='Type to filter label text...'
                                (keyup)='updateFilterTitle($event)'/>
                            </span>
                            <ul class="list m-20">
                                <li class="side-margin row-end p-no"><span>Found Elements </span> <strong>{{ labelSearchCount }}</strong></li>
                            </ul>
                            
                        </div>
                    </div>
                </ng-container>

                <!-- 출력상자 : Node/Edge 상세 정보 -->
                <ng-container *ngIf="!!selectedElement">
                    <div id="slide-toggle" class="slide col">
                        <div class="row-center">
                            <h4><strong>{{ selectedElement.group() || uppercase }}</strong> info.</h4>
                            <mat-slide-toggle *ngIf="selectedElement.isNode()" #nodeLockSlideToggle
                            [checked]="selectedElement.locked()" (change)="selectedLockToggle(selectedElement)" matTooltip="Location Rock">
                            </mat-slide-toggle>
                        </div>
                        <ul class="list col strech border noborder m-10">
                            <li class="side-margin"><span>Label</span>{{ selectedElement.data('label') }} [{{ selectedElement.id() }}]</li>
                            <li class="side-margin"><span>Name</span>{{ selectedElement.data('name') }}</li>
                            <li class="col strech side-margin">
                                <span>Data</span>
                                <div class="json strech m-10"><pre [innerHtml]="selectedElement.data('props') | prettyjson:3"></pre></div>
                            </li>
                        </ul>
                    </div>
                </ng-container>

                <!-- 출력상자 : Label 상세 정보 -->
                <ng-container *ngIf="!!selectedLabel && !selectedElement">
                    <div id="slide-toggle" class="slide col">
                        <div class="row-center">
                            <h4><strong>Label</strong> info.</h4>
                        </div>
                        <ul class="list col strech border noborder m-10">
                            <li class="side-margin"><span>Group</span>{{ selectedLabel.type }} (cnt={{ selectedLabel.size }})</li>
                            <li class="side-margin"><span>Name</span>{{ selectedLabel.name }}</li>
                            <li class="side-margin noborder">
                                <span>Properties</span>
                                <!-- <div class="json strech m-10"><pre [innerHtml]="selectedLabel.properties | prettyjson:3"></pre></div> -->
                            </li>
                            <li class="side-margin strech border p-no overflow-y">
                                <div>
                                    <table mat-table [dataSource]="selectedLabel.properties">
                                        <ng-container matColumnDef="propName">
                                            <th mat-header-cell *matHeaderCellDef> Name </th>
                                            <td mat-cell *matCellDef="let prop"> {{prop.key}} </td>
                                        </ng-container>
                                        <ng-container matColumnDef="propType">
                                            <th mat-header-cell *matHeaderCellDef> Type </th>
                                            <td mat-cell *matCellDef="let prop"> {{prop.type}} </td>
                                        </ng-container>
                                        <ng-container matColumnDef="propCnt">
                                            <th mat-header-cell *matHeaderCellDef> Count </th>
                                            <td mat-cell *matCellDef="let prop"> {{prop.size}} </td>
                                        </ng-container>
                                        <tr mat-header-row *matHeaderRowDef="displayedLabelColumns"></tr>
                                        <tr mat-row *matRowDef="let row; columns : displayedLabelColumns"></tr>
                                    </table>
                                </div>
                            </li>
                        </ul>
                    </div>
                </ng-container>

                <!-- 입력상자 : CycleDetection -->
                <ng-container *ngIf="btnStatus.findCycles">
                    <div id="slide-toggle" class="slide col side-short-component">
                        <div class="row-center">
                            <h4>Find <strong>Cycles</strong></h4>
                        </div>
                        <div>
                            <ul class="list border noborder">
                                <li class="row-center" *ngFor="let row of grph_data; let i = index">
                                    <mat-icon class="m-r-10">rotate_right</mat-icon> <p class="m-no" href="javascript:void(0)" (click)="onClickCyclePath(i)"> {{ row.join(' > ') }} </p>
                                </li>
                            </ul>
                        </div>
                    </div>
                </ng-container>

                <!-- 입력상자 : 타임라인 timeLine -->
                <ng-container *ngIf="btnStatus.timeLine">
                    <div id="slide-toggle-timeline" class="slide col side-short-component">
                        <!-- [style.visibility]="btnStatus.timeLine ? 'visible' : 'hidden'"> -->
                        <div class="row-center">
                            <h4>Play <strong>Timeline</strong></h4>
                        </div>
                        <div class="col m-20">
                            
                            <mat-form-field>
                                <mat-select placeholder="select Label" 
                                    [formControl]="timelineLabelCtl">
                                    <mat-option *ngFor="let label of labels" [value]="label">
                                    {{label.name}}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                            
                            <mat-form-field>
                                <mat-select placeholder="select Property"
                                    [formControl]="timelinePropertyCtl" (selectionChange)="onChangeTimelineProperty($event)">
                                    <mat-option *ngFor="let prop of timelineLabelCtl.value.properties" [value]="prop">
                                    {{prop.key}}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                            <mat-form-field>
                                <input matInput type="text" placeholder="Check sample" value=""
                                    [formControl]="timelineSampleCtl">
                            </mat-form-field>
    
                            <mat-form-field>
                                <input matInput type="text" placeholder="Date format" value="YYYY-MM-DD"
                                    [formControl]="timelineFormatCtl" (input)="onChangeTimelineFormat($event.target.value)">
                            </mat-form-field>
                            <button #btnSetTimeline [disabled]="timelineDisabled" mat-raised-button (click)="setTimelineData()">Set Timeline</button>

                            <timeline-slider #timelineSlider
                                [values]="timeline_data"
                                [interval]="3000"
                                (onChange)="onChangeTimelineSlider($event)"
                                (onUpdate)="onUpdateTimelineSlider($event)"
                                (onInput)="onUpdateTimelineSlider($event)"></timeline-slider>
                            <!-- <mat-slider></mat-slider> -->
                        </div>
                    </div>
                </ng-container>

                <!-- 입력상자 : 최단 경로 -->
                <ng-container *ngIf="btnStatus.shortestPath">
                    <div id="slide-toggle" class="slide col side-short-component">
                        <div class="row-center">
                            <h4>Find <strong>Shortest Path</strong></h4>
                            <mat-slide-toggle #slideShortestPathDirected [checked]="shortestPathOptions.directed" matTooltip="directed option">
                            </mat-slide-toggle>
                        </div>
                        <div class="row-center m-20">
                            <ul class="list col strech">
                                <li class="side-margin row-start">
                                    <mat-icon class="row-side">adjust</mat-icon>
                                    <div class="strech row-center border-bottom">
                                        <span class="subtitle">Start Node</span>
                                        <span>{{ shortestPathOptions.sid }}</span>
                                    </div>
                                </li>
                                <li class="side-padding"><mat-icon>more_vert</mat-icon></li>
                                <li class="side-margin row-start">
                                    <mat-icon class="row-side">pin_drop</mat-icon>
                                    <div class="strech row-center border-bottom">
                                        <span class="subtitle">End Node</span>
                                        <span>{{ shortestPathOptions.eid }}</span>
                                    </div>
                                </li>
                            </ul>                            
                        </div>
                        <div class="row m-10">
                            <button class="strech row-side" color="primary" (click)="doFindShortestPath()">Search</button>
                            <button class="strech" (click)="clearFindShortestPath()">Clear</button>
                        </div>
                        <div class="row-center m-20 p-10 border">
                            <span class="subtitle">Distance :</span><div *ngIf="shortestPathOptions.distTo"> <strong>{{ shortestPathOptions.distTo }}</strong></div>
                        </div>
                    </div>
                </ng-container>
            </nav>
            
            <!-- Graph.Meta : Labels content -->
            <mat-chip-list id="agens-graph-labels">
                <mat-chip *ngFor="let label of labels" [selected]="true"
                    (click)="clickGraphLabelChip(label.type, label.name)" 
                    [style.background]="(label.scratch['_style'].color) ? label.scratch['_style'].color.bc : '#d3d3d3'">
                    <span *ngIf="label.type=='nodes'" class="nodeType">{{label.name}} ({{label.size}})</span>
                    <span *ngIf="label.type=='edges'" class="edgeType">{{label.name}} ({{label.size}})</span>
                </mat-chip>
            </mat-chip-list>
        </div>
        <!-- Graph.Meta : toolbar -->
        <div id="agens-graph-toolbar" class="viewbox">
            <div class="scroll-hide">
            <ul class="list icon">
                <li><a class="checked" [ngClass]="{ 'checked': btnStatus.showHideTitle }" id="btnShowHideTitle" mat-button-toggle #btnShowHideTitle (click)="toggleShowHideTitle()" matTooltip="show/hide Title" matTooltipPosition="above">
                    <mat-icon>label</mat-icon></a></li>

                <li><a [ngClass]="{ 'checked': btnStatus.labelStyle }" (click)="openLabelStyleSheet()" matTooltip="Styling by Label" matTooltipPosition="above">
                    <mat-icon>palette</mat-icon></a></li>

                <li><a [ngClass]="{ 'checked': btnStatus.metaGraph }" id="btnResultSearch" mat-button-toggle #btnResultSearch (click)="openSearchResultDialog()" matTooltip="Search in result" matTooltipPosition="above">
                    <mat-icon>search</mat-icon></a></li>

                <li><a [ngClass]="{ 'disabled-btn': isLoading }" [matMenuTriggerFor]="layoutMenu" matTooltip="LAYOUT" matTooltipPosition="above"><mat-icon>bubble_chart</mat-icon></a>
                    <mat-menu #layoutMenu="matMenu" [attr.x-position]="before" [attr.y-position]="below">
                        <div td-menu-header>
                            <h4 class="mat-subhead">Layout <strong>Type</strong></h4>
                        </div>
                        <mat-divider></mat-divider>
                            <button mat-menu-item (click)="graphChangeLayout('random')">Random</button>
                        <mat-divider></mat-divider>
                            <button mat-menu-item (click)="graphChangeLayout('grid')">Grid</button>
                        <mat-divider></mat-divider>
                            <button mat-menu-item (click)="graphChangeLayout('breadthfirst')">Breadth-first</button>
                        <mat-divider></mat-divider>
                            <button mat-menu-item (click)="graphChangeLayout('concentric')">Concentric</button>
                        <mat-divider></mat-divider>
                            <button mat-menu-item (click)="graphChangeLayout('cola')">Cola</button>
                        <mat-divider></mat-divider>
                            <button mat-menu-item (click)="graphChangeLayout('cose')">Cose(nodes.size &lt; 400)</button>
                        <mat-divider></mat-divider>
                            <button mat-menu-item (click)="graphChangeLayout('cose-bilkent')">Cose-Bilkent(very slow)</button>
                        <mat-divider></mat-divider>
                            <button mat-menu-item (click)="graphChangeLayout('dagre')">Dagre(hierachy)</button>
                        <mat-divider></mat-divider>
                            <button mat-menu-item (click)="graphChangeLayout('klay')">Klay</button>
                        <mat-divider></mat-divider>
                            <button mat-menu-item (click)="graphChangeLayout('euler')">Euler</button>
                    </mat-menu>
                </li>

                <li><a [ngClass]="{ 'disabled-btn': isLoading }" [matMenuTriggerFor]="centralityMenu" matTooltip="Centrality" matTooltipPosition="above">
                    <mat-icon>control_camera</mat-icon></a>
                    <mat-menu #centralityMenu="matMenu" [attr.x-position]="before" [attr.y-position]="below">
                        <div td-menu-header>
                            <h4 class="mat-subhead">Centrality <strong>Methods</strong></h4>
                        </div>
                        <mat-divider></mat-divider>
                            <button mat-menu-item (click)="graphCentrality('reset')">Reset styles</button>
                        <mat-divider></mat-divider>
                            <button mat-menu-item (click)="graphCentrality('degree')">Degree</button>
                        <mat-divider></mat-divider>
                            <button mat-menu-item (click)="graphCentrality('pagerank')">PageRank</button>
                        <mat-divider></mat-divider>
                            <button mat-menu-item (click)="graphCentrality('closeness')">Closeness</button>
                        <mat-divider></mat-divider>
                            <button mat-menu-item (click)="graphCentrality('betweenness')">Betweenness</button>
                    </mat-menu>
                </li>

                <li><a [ngClass]="{ 'checked': btnStatus.neighbors }" id="btnHighlightNeighbors" mat-button-toggle #btnHighlightNeighbors (click)="toggleHighlightNeighbors()" matTooltip="Highlight Neighbors" matTooltipPosition="above">
                    <mat-icon id="btnHighlightNeighborsIcon">grain</mat-icon></a></li>

                <li><a [ngClass]="{ 'disabled-btn': isLoading }" (click)="openImageExportDialog()" matTooltip="Image Export" matTooltipPosition="above">
                    <mat-icon>image</mat-icon></a></li>

                <li><a [ngClass]="{ 'checked': btnStatus.connectedGroup }" (click)="toggleFindConnectedGroup()" matTooltip="find Connected Group" matTooltipPosition="above">
                    <mat-icon>group_work</mat-icon></a></li>

                <li><a mat-button-toggle [ngClass]="{ 'checked': btnStatus.shortestPath }" #btnShortestPath (click)="toggleFindShortestPath()" matTooltip="find Shortest Path" matTooltipPosition="above">
                    <mat-icon>location_on</mat-icon></a></li>

                <li><a [ngClass]="{ 'checked': btnStatus.findCycles }" (click)="toggleFindCycles()" matTooltip="find Cycles" matTooltipPosition="above">
                    <mat-icon>toll</mat-icon></a></li>

                <!-- <li><a [ngClass]="{ 'checked': btnStatus.editGraph }" (click)="openEditGraphSheet()" matTooltip="edit Graph" matTooltipPosition="above">
                    <mat-icon>create</mat-icon></a></li> -->

                    <li><a [ngClass]="{ 'checked': btnStatus.timeLine }" (click)="toggleTimeline()" matTooltip="play Timeline" matTooltipPosition="above">
                        <mat-icon>fast_forward</mat-icon></a></li>	                   

                <li><a [ngClass]="{ 'disabled-btn': isLoading }" (click)="refreshCanvas()" matTooltip="refresh Canvas" matTooltipPosition="above">
                    <mat-icon>reply</mat-icon></a></li>

                <li><a [ngClass]="{ 'disabled-btn': isLoading }" (click)="reloadGraph()" matTooltip="reload Graph" matTooltipPosition="above">
                    <mat-icon>reply_all</mat-icon></a></li>

            </ul>
            </div>
        </div>
    </div>
</div>